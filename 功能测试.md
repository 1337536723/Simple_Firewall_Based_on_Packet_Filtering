#功能测试

测试中使用三台主机，包括本机(Win10)以及两台虚拟机(XP和SEEDUbuntu)。其中XP为防火墙程序运行的主机，SEEDUbuntu用于进行攻击，本机用于进行一些辅助的测试。

本机IP地址：  172.16.85.184
XP主机IP地址：172.16.85.225
SEEDUbuntu主机IP地址：172.16.85.60

除了ICMP包之外，防火墙程序还实现了对TCP包和UDP包的过滤。要进行ICMP包测试可以简单地使用ping命令，而后面两者的测试就需要借助Raw socket编程了。在前面的项目[Packet-Sniffing-and-Spoofing-with-pcap](https://github.com/familyld/Packet-Sniffing-and-Spoofing-with-pcap)中已经进行过相应的练习。这次我们可以进行简单修改，以满足测试需求。

Raw socket样例代码下载：[C Language Examples of IPv4 and IPv6 Raw Sockets for Linux](http://www.pdbuchan.com/rawsock/rawsock.html)

##测试Block ping功能

测试Block ping是比较简单的，我们只需要检验，启用该功能时，是否所有进出的ICMP包都被拦截下来就可以了。

具体来说，在SEEDUbuntu中可以直接ping 172.16.85.225，Linux下使用ping命令会一直发包。在Windows系统中则可以通过`ping 172.16.85.225 -n 100`这样的命令发送指定数量的包。

测试时首先在用户界面点击Block All按钮，然后在SEEDUbuntu和本机分别启用ping命令，再回到用户界面点击Start按钮开始过滤，一段时间后，点击Stop按钮停止过滤。

使用Raw socket编程也可以实现，我在原文件基础上增加了一个用户输入的命令行参数，用于指定发包数量。执行以后可以在WireShark中查看，检查收发包的情况。

特别地，需要注意修改网卡的名称，原项目中网卡是eth0，但在这里是eth13（见[实验配置](https://github.com/familyld/Simple_Firewall_Based_on_Packet_Filtering/blob/master/%E5%AE%9E%E9%AA%8C%E9%85%8D%E7%BD%AE.md)）。

##测试OnAddSave功能

这部分的测试，分三个部分：

1. 添加规则后是否能存储到本地文件；
2. 本地文件是否可以通过View rules事件被加载到用户界面；
3. 添加的规则是否能被用于过滤指定的包(分别测试ICMP,TCP和UDP)。



##测试Block All功能

##测试Allow All功能




